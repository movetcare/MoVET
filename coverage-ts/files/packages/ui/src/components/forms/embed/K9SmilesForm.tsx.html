
  <!DOCTYPE html>
  <html>
    <head>
      <title>K9SmilesForm.tsx</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">packages/ui/src/components/forms/embed/K9SmilesForm.tsx</td><td class="">98.06%</td><td class="">75%</td><td class="">206</td><td class="">202</td><td class="">4</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { useState } from &quot;react&quot;;
import { useForm } from &quot;react-hook-form&quot;;
import { ServerResponse } from &quot;types&quot;;
import { faPaw } from &quot;@fortawesome/free-solid-svg-icons&quot;;
import { Loader, ErrorMessage, Button } from &quot;../../elements&quot;;
import { TextInput, EmailInput } from &quot;../inputs&quot;;
import PhoneInput from &quot;../inputs/PhoneInput&quot;;
import { object, string } from &quot;yup&quot;;
import { yupResolver } from &quot;@hookform/resolvers/yup&quot;;
import Link from &quot;next/link&quot;;
import { useRouter } from &quot;next/router&quot;;

export const K9SmilesForm = () =&gt; {
  const router = useRouter();
  const [isLoading, setIsLoading] = useState&lt;boolean&gt;(false);
  const [errorMessage, setErrorMessage] = useState&lt;string | null&gt;(null);
  const {
    control,
    handleSubmit,
    reset,
    formState: { isDirty, errors },
  } = useForm({
    mode: &quot;onSubmit&quot;,
    resolver: yupResolver(
      object({
        email: string()
          .email(&quot;Email must be a valid email address&quot;)
          .required(&quot;An email address is required&quot;),
        firstName: string().required(&quot;A First Name is required&quot;),
        lastName: string().required(&quot;A last name is required&quot;),
        phone: string().required(&quot;A phone number is required&quot;),
      })
    ),
    defaultValues: {
      firstName: &quot;&quot;,
      lastName: &quot;&quot;,
      email: &quot;&quot;,
      phone: &quot;&quot;,
    },
  });

  const onSubmit = async (data: unknown) =&gt; {
    setIsLoading(true);
    const submitForm = async () =&gt;
      (
        await fetch(&quot;/api/k9-smiles&quot;, {
          method: &quot;POST&quot;,
          body: JSON.stringify(data),
        })
      ).json();
    submitForm()
      .then((response: ServerResponse) =&gt; {
        if (response.error) setErrorMessage(response.error);
        else if (Number(router.query.disableRedirect) !== 1)
          window.open(&quot;https://movet.timetap.com/&quot;, &quot;_blank&quot;);
      })
      .catch((error) =&gt; {
        setErrorMessage(error?.message || JSON.stringify(error));
      })
      .finally(() =&gt; {
        reset();
        setIsLoading(false);
      });
  };

  return (
    &lt;&gt;
      {isLoading ? (
        &lt;Loader message=&quot;Taking You to K-9 Smile&#x27;s Appointment Schedule...&quot; /&gt;
      ) : (
        &lt;div id=&quot;sign-up-form&quot;&gt;
          {errorMessage ? (
            &lt;pre&gt;
              &lt;ErrorMessage errorMessage={errorMessage} /&gt;
            &lt;/pre&gt;
          ) : (
            &lt;div className=&quot;mt-8 w-full sm:max-w-md&quot;&gt;
              &lt;form className=&quot;grid grid-cols-1 gap-y-4 sm:grid-cols-2 sm:gap-x-4 text-left&quot;&gt;
                &lt;TextInput
                  disabled={isLoading}
                  label=&quot;First Name&quot;
                  name=&quot;firstName&quot;
                  control={control}
                  errors={errors}
                  placeholder=&quot;Your First Name&quot;
                  autoComplete=&quot;given-name&quot;
                  required
                /&gt;
                &lt;TextInput
                  disabled={isLoading}
                  label=&quot;Last Name&quot;
                  name=&quot;lastName&quot;
                  control={control}
                  errors={errors}
                  placeholder=&quot;Your Last Name&quot;
                  autoComplete=&quot;family-name&quot;
                  required
                /&gt;
                &lt;div className=&quot;sm:col-span-2 my-2&quot;&gt;
                  &lt;EmailInput
                    required
                    disabled={isLoading}
                    label=&quot;Email Address&quot;
                    name=&quot;email&quot;
                    errors={errors}
                    control={control}
                    placeholder={&quot;Your Email Address&quot;}
                  /&gt;
                &lt;/div&gt;
                &lt;div className=&quot;sm:col-span-2 my-2&quot;&gt;
                  &lt;PhoneInput
                    disabled={isLoading}
                    label=&quot;Phone Number&quot;
                    name=&quot;phone&quot;
                    control={control}
                    errors={errors}
                    required
                  /&gt;
                &lt;/div&gt;
                &lt;div className=&quot;flex flex-col justify-center items-center sm:col-span-2 my-4&quot;&gt;
                  &lt;Button
                    type=&quot;submit&quot;
                    icon={faPaw}
                    iconSize={&quot;sm&quot;}
                    loading={isLoading}
                    disabled={!isDirty || isLoading}
                    color=&quot;black&quot;
                    text=&quot;Schedule an Appointment&quot;
                    className={&quot;w-full md:w-1/3&quot;}
                    onClick={handleSubmit(onSubmit)}
                  /&gt;
                  &lt;div className=&quot;flex sm:col-span-2 mx-auto mt-2&quot;&gt;
                    &lt;div className=&quot;flex flex-col items-center justify-center text-center&quot;&gt;
                      &lt;p className=&quot;text-xs italic text-movet-black&quot;&gt;
                        By clicking the &amp;quot;Schedule an Appointment&amp;quot;
                        button above,
                        &lt;br /&gt;
                        you agree to the{&quot; &quot;}
                        &lt;span className=&quot;font-medium font-abside text-center md:text-left hover:underline  ease-in-out duration-500 mb-2&quot;&gt;
                          &lt;Link href=&quot;/privacy-policy?mode=app&quot;&gt;
                            &lt;span className=&quot;text-movet-brown hover:underline  ease-in-out duration-500 cursor-pointer&quot;&gt;
                              privacy policy
                            &lt;/span&gt;
                          &lt;/Link&gt;
                        &lt;/span&gt;{&quot; &quot;}
                        and{&quot; &quot;}
                        &lt;span className=&quot;font-medium font-abside text-center md:text-left hover:underline  ease-in-out duration-500 mb-2&quot;&gt;
                          &lt;Link href=&quot;/terms-and-conditions?mode=app&quot;&gt;
                            &lt;span className=&quot;text-movet-brown hover:underline  ease-in-out duration-500 cursor-pointer&quot;&gt;
                              terms of service
                            &lt;/span&gt;
                          &lt;/Link&gt;
                        &lt;/span&gt;
                        .
                      &lt;/p&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              &lt;/form&gt;
            &lt;/div&gt;
          )}
        &lt;/div&gt;
      )}
    &lt;/&gt;
  );
};
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;packages/ui/src/components/forms/embed/K9SmilesForm.tsx&quot;,&quot;line&quot;:56,&quot;character&quot;:14,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;packages/ui/src/components/forms/embed/K9SmilesForm.tsx&quot;,&quot;line&quot;:57,&quot;character&quot;:24,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;packages/ui/src/components/forms/embed/K9SmilesForm.tsx&quot;,&quot;line&quot;:57,&quot;character&quot;:31,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;packages/ui/src/components/forms/embed/K9SmilesForm.tsx&quot;,&quot;line&quot;:57,&quot;character&quot;:57,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 02 Mar 2023 15:37:59 GMT</p>
    </body>
  </html>
  

  <!DOCTYPE html>
  <html>
    <head>
      <title>processWebhook.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts</td><td class="">29.81%</td><td class="">75%</td><td class="">208</td><td class="">62</td><td class="">146</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import Stripe from &quot;stripe&quot;;
import {
  stripe,
  throwError,
  stripeWebhookSecret,
  environment,
} from &quot;../../config/config&quot;;
import { Response } from &quot;express&quot;;
import { terminalReaderActionSucceeded } from &quot;./pos/terminalReaderActionSucceeded&quot;;
import { terminalReaderActionFailed } from &quot;./pos/terminalReaderActionFailed&quot;;
import { terminalReaderConnected } from &quot;./pos/terminalReaderConnected&quot;;
import { terminalReaderDisconnected } from &quot;./pos/terminalReaderDisconnected&quot;;
import { checkoutSessionCompleted } from &quot;./checkout/checkoutSessionCompleted&quot;;
import { paymentMethodUpdated } from &quot;./paymentMethodUpdated&quot;;
import { paymentIntentUpdated } from &quot;./paymentIntentUpdated&quot;;
import { sendNotification } from &quot;../../notifications/sendNotification&quot;;

export const processStripeWebhook = async (
  request: any,
  response: Response
) =&gt; {
  console.log(&quot;INCOMING STRIPE REQUEST PAYLOAD =&gt; &quot;, request.body);
  const sig: any = request.headers[&quot;stripe-signature&quot;];
  let event: Stripe.Event | any;
  if (environment.type !== &quot;development&quot;) {
    try {
      event = stripe.webhooks.constructEvent(
        request?.rawBody,
        sig,
        stripeWebhookSecret
      );
    } catch (error: any) {
      throwError(error);
      response.status(400).send({ error: error?.message });
      return;
    }
  } else event = request.body;
  if (
    event.type.includes(&quot;terminal.reader.&quot;) ||
    event.type.includes(&quot;checkout.session.&quot;) ||
    event.type.includes(&quot;payment_method.&quot;) ||
    event.type.includes(&quot;payment_intent.&quot;)
  ) {
    let message = null;
    if (event?.data?.object?.object === &quot;terminal.reader&quot;) {
      message = `:desktop_computer:  ${
        event?.data?.object?.label
      }: ${event?.type?.toUpperCase()} - ${
        event?.data?.object?.action?.type
      }: ${event?.data?.object?.action?.status}`;
    } else if (event?.data?.object?.object === &quot;payment_intent&quot;) {
      message = `:moneybag: ${event?.type?.toUpperCase()} $${
        event?.data?.object?.amount_received / 100
      } of $${event?.data?.object?.amount / 100} received via ${
        event?.data?.object?.payment_method_types[0]
      }`;
    } else if (event?.data?.object?.object === &quot;payment_method&quot;) {
      message = `:credit_card: ${event?.type?.toUpperCase()} - ${event?.data?.object?.card?.brand?.toUpperCase()} : ${
        event?.data?.object?.card?.exp_month
      }/${event?.data?.object?.card?.exp_year}`;
    } else if (event?.data?.object?.object === &quot;checkout.session&quot;) {
      message = `:shopping_trolley: ${event?.type?.toUpperCase()} - ${event?.data?.object?.payment_method_types[0]?.toUpperCase()} - ${
        event?.data?.object?.client_reference_id
      }`;
    }
    message += `\n\nhttps://dashboard.stripe.com/events/${request.body?.id}\n\n`;
    sendNotification({ type: &quot;slack&quot;, payload: { message } });
    switch (event.type) {
      case &quot;terminal.reader.action_failed&quot;:
        terminalReaderActionFailed(event);
        break;
      case &quot;terminal.reader.action_succeeded&quot;:
        terminalReaderActionSucceeded(event);
        break;
      case &quot;terminal.reader.connected&quot;:
        terminalReaderConnected(event);
        break;
      case &quot;terminal.reader.disconnected&quot;:
        terminalReaderDisconnected(event);
        break;
      case &quot;checkout.session.completed&quot;:
        checkoutSessionCompleted(event);
        break;
      case &quot;payment_method.updated&quot;:
        paymentMethodUpdated(event);
        break;
      case &quot;payment_method.attached&quot;:
        paymentMethodUpdated(event);
        break;
      case &quot;payment_method.detached&quot;:
        paymentMethodUpdated(event);
        break;
      case &quot;payment_method.automatically_updated&quot;:
        paymentMethodUpdated(event);
        break;
      case &quot;payment_intent.amount_capturable_updated&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.canceled&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.created&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.partially_funded&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.payment_failed&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.processing&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.requires_action&quot;:
        paymentIntentUpdated(event);
        break;
      case &quot;payment_intent.succeeded&quot;:
        paymentIntentUpdated(event);
        break;
      default:
        throwError({ ...event, message: &quot;Stripe Event Type Missing!&quot; });
        break;
    }
    return response.status(200).send({ received: true });
  } else
    sendNotification({
      type: &quot;slack&quot;,
      payload: {
        message: `:interrobang: UNSUPPORTED SLACK WEBHOOK TRIGGERED\n\nhttps://dashboard.stripe.com/events/${request.body?.id}\n\n`,
      },
    });
  return response.status(400).send({ received: false });
};
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:4,&quot;character&quot;:2,&quot;text&quot;:&quot;stripeWebhookSecret&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:5,&quot;character&quot;:2,&quot;text&quot;:&quot;environment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:18,&quot;character&quot;:2,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:21,&quot;character&quot;:53,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:21,&quot;character&quot;:61,&quot;text&quot;:&quot;body&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:22,&quot;character&quot;:8,&quot;text&quot;:&quot;sig&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:22,&quot;character&quot;:19,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:22,&quot;character&quot;:27,&quot;text&quot;:&quot;headers&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:23,&quot;character&quot;:6,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:24,&quot;character&quot;:6,&quot;text&quot;:&quot;environment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:24,&quot;character&quot;:18,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:26,&quot;character&quot;:6,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:27,&quot;character&quot;:8,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:27,&quot;character&quot;:17,&quot;text&quot;:&quot;rawBody&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:32,&quot;character&quot;:17,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:33,&quot;character&quot;:34,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:33,&quot;character&quot;:41,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:33,&quot;character&quot;:48,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:31,&quot;character&quot;:13,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:36,&quot;character&quot;:9,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:36,&quot;character&quot;:17,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:36,&quot;character&quot;:25,&quot;text&quot;:&quot;body&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:4,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:10,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:15,&quot;text&quot;:&quot;includes&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:39,&quot;character&quot;:4,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:39,&quot;character&quot;:10,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:39,&quot;character&quot;:15,&quot;text&quot;:&quot;includes&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:40,&quot;character&quot;:4,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:40,&quot;character&quot;:10,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:40,&quot;character&quot;:15,&quot;text&quot;:&quot;includes&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:41,&quot;character&quot;:4,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:41,&quot;character&quot;:10,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:41,&quot;character&quot;:15,&quot;text&quot;:&quot;includes&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:43,&quot;character&quot;:8,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:44,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:44,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:44,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:44,&quot;character&quot;:29,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:45,&quot;character&quot;:6,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:46,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:46,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:46,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:46,&quot;character&quot;:29,&quot;text&quot;:&quot;label&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:47,&quot;character&quot;:11,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:47,&quot;character&quot;:18,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:47,&quot;character&quot;:24,&quot;text&quot;:&quot;toUpperCase&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:29,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:37,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:49,&quot;character&quot;:11,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:49,&quot;character&quot;:18,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:49,&quot;character&quot;:24,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:49,&quot;character&quot;:32,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:49,&quot;character&quot;:40,&quot;text&quot;:&quot;status&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:50,&quot;character&quot;:15,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:50,&quot;character&quot;:22,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:50,&quot;character&quot;:28,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:50,&quot;character&quot;:36,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:51,&quot;character&quot;:6,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:51,&quot;character&quot;:30,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:51,&quot;character&quot;:37,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:51,&quot;character&quot;:43,&quot;text&quot;:&quot;toUpperCase&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:52,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:52,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:52,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:52,&quot;character&quot;:29,&quot;text&quot;:&quot;amount_received&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:53,&quot;character&quot;:14,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:53,&quot;character&quot;:21,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:53,&quot;character&quot;:27,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:53,&quot;character&quot;:35,&quot;text&quot;:&quot;amount&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:54,&quot;character&quot;:29,&quot;text&quot;:&quot;payment_method_types&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:56,&quot;character&quot;:15,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:56,&quot;character&quot;:22,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:56,&quot;character&quot;:28,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:56,&quot;character&quot;:36,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:6,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:33,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:40,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:46,&quot;text&quot;:&quot;toUpperCase&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:65,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:72,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:78,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:86,&quot;text&quot;:&quot;card&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:92,&quot;text&quot;:&quot;brand&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:57,&quot;character&quot;:99,&quot;text&quot;:&quot;toUpperCase&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:58,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:58,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:58,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:58,&quot;character&quot;:29,&quot;text&quot;:&quot;card&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:58,&quot;character&quot;:35,&quot;text&quot;:&quot;exp_month&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:10,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:17,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:23,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:31,&quot;text&quot;:&quot;card&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:59,&quot;character&quot;:37,&quot;text&quot;:&quot;exp_year&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:60,&quot;character&quot;:15,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:60,&quot;character&quot;:22,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:60,&quot;character&quot;:28,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:60,&quot;character&quot;:36,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:6,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:38,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:45,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:51,&quot;text&quot;:&quot;toUpperCase&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:70,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:77,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:83,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:91,&quot;text&quot;:&quot;payment_method_types&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:61,&quot;character&quot;:116,&quot;text&quot;:&quot;toUpperCase&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:62,&quot;character&quot;:8,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:62,&quot;character&quot;:15,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:62,&quot;character&quot;:21,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:62,&quot;character&quot;:29,&quot;text&quot;:&quot;client_reference_id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:65,&quot;character&quot;:4,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:65,&quot;character&quot;:58,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:65,&quot;character&quot;:66,&quot;text&quot;:&quot;body&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:65,&quot;character&quot;:72,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:66,&quot;character&quot;:49,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:67,&quot;character&quot;:12,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:67,&quot;character&quot;:18,&quot;text&quot;:&quot;type&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:69,&quot;character&quot;:35,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:72,&quot;character&quot;:38,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:75,&quot;character&quot;:32,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:78,&quot;character&quot;:35,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:81,&quot;character&quot;:33,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:84,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:87,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:90,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:93,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:96,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:99,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:102,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:105,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:108,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:111,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:114,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:117,&quot;character&quot;:29,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:120,&quot;character&quot;:24,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:128,&quot;character&quot;:109,&quot;text&quot;:&quot;request&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:128,&quot;character&quot;:117,&quot;text&quot;:&quot;body&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/processWebhook.ts&quot;,&quot;line&quot;:128,&quot;character&quot;:123,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 02 Mar 2023 15:37:59 GMT</p>
    </body>
  </html>
  
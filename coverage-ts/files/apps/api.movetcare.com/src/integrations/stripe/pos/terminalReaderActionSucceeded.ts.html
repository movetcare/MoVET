
  <!DOCTYPE html>
  <html>
    <head>
      <title>terminalReaderActionSucceeded.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="negative"><td class="">apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts</td><td class="">29.67%</td><td class="">75%</td><td class="">182</td><td class="">54</td><td class="">128</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import { admin, stripe, throwError } from &quot;../../../config/config&quot;;
const DEBUG = false; // environment.type === &quot;production&quot;;
export const terminalReaderActionSucceeded = (event: any): void =&gt; {
  if (DEBUG) console.log(&quot;terminalReaderActionSucceeded EVENT =&gt; &quot;, event);
  admin
    .firestore()
    .collection(&quot;configuration&quot;)
    .doc(&quot;pos&quot;)
    .collection(&quot;terminals&quot;)
    .doc(`${event?.data?.object?.id}`)
    .set(
      {
        ...event?.data?.object,
        display: null,
        updatedOn: new Date(),
      },
      { merge: true }
    )
    .catch((error: any) =&gt; throwError(error));
  admin
    .firestore()
    .collection(&quot;counter_sales&quot;)
    .where(
      &quot;paymentIntent&quot;,
      &quot;==&quot;,
      event?.data?.object?.action?.process_payment_intent?.payment_intent
    )
    .limit(1)
    .get()
    .then((querySnapshot: any) =&gt; {
      if (DEBUG)
        console.log(&quot;querySnapshot?.docs?.length&quot;, querySnapshot?.docs?.length);
      if (querySnapshot?.docs?.length &gt; 0)
        querySnapshot.forEach(async (doc: any) =&gt; {
          const paymentIntent: any = await stripe.paymentIntents.retrieve(
            event?.data?.object?.action?.process_payment_intent?.payment_intent
          );
          if (DEBUG) {
            console.log(doc.id, &quot; =&gt; &quot;, doc.data());
            console.log(&quot;paymentIntent&quot;, paymentIntent);
          }
          let didCapturePayment: any = null;
          if (paymentIntent?.status === &quot;requires_capture&quot;) {
            didCapturePayment = await stripe.paymentIntents
              .capture(
                event?.data?.object?.action?.process_payment_intent
                  ?.payment_intent
              )
              .catch((error: any) =&gt; throwError(error));
          }
          if (DEBUG) console.log(&quot;didCapturePayment&quot;, didCapturePayment);
          // await admin
          //   .firestore()
          //   .collection(&#x27;counter_sales&#x27;)
          //   .doc(doc.id)
          //   .set(
          //     {
          //       paymentStatus: !didCapturePayment
          //         ? event?.data?.object?.action?.status
          //         : didCapturePayment?.status,
          //       paymentIntentObject: !didCapturePayment
          //         ? paymentIntent
          //         : didCapturePayment,
          //       updatedOn: new Date(),
          //     },
          //     {merge: true}
          //   )
          // .then(
          //   async () =&gt;
          //     await request
          //       .post(&#x27;/invoicepayment/&#x27;, {
          //         invoice: doc.data()?.url,
          //         payment_type: 0,
          //         paid: paymentIntent?.amount / 100,
          //         status: 3,
          //         info: !didCapturePayment
          //           ? `${paymentIntent?.charges?.data[0]?.card_present?.brand.toUpperCase()} - ${
          //               paymentIntent?.charges?.data[0]?.card_present?.last4
          //             }`
          //           : `${didCapturePayment?.charges?.data[0]?.card_present?.brand.toUpperCase()} - ${
          //               didCapturePayment?.charges?.data[0]?.card_present
          //                 ?.last4
          //             }`,
          //         created_user:
          //           proVetApiUrl +
          //           `/user/${
          //             7
          //             // environment?.type === &#x27;production&#x27; ? &#x27;7&#x27; : &#x27;63&#x27;
          //           }/`,
          //       })
          //       .then((response: any) =&gt; {
          //         const {data} = response;
          //         if (DEBUG)
          //           console.log(
          //             &#x27;API Response: POST /invoicepayment/ =&gt; &#x27;,
          //             data
          //           );
          //       })
          //       .catch(
          //         async (error: any) =&gt;
          //           (throwError(error)) &amp;&amp;
          //           console.error(&#x27;error.response.data&#x27;, error.response.data)
          //       )
          // )
          //  .catch((error: any) =&gt; throwError(error));
        });
      else
        admin
          .firestore()
          .collection(&quot;client_invoices&quot;)
          .where(
            &quot;paymentIntent&quot;,
            &quot;==&quot;,
            event?.data?.object?.action?.process_payment_intent?.payment_intent
          )
          .limit(1)
          .get()
          .then((querySnapshot: any) =&gt; {
            if (DEBUG)
              console.log(
                &quot;querySnapshot?.docs?.length&quot;,
                querySnapshot?.docs?.length
              );
            if (querySnapshot?.docs?.length &gt; 0)
              querySnapshot.forEach(async (doc: any) =&gt; {
                const paymentIntent: any = await stripe.paymentIntents.retrieve(
                  event?.data?.object?.action?.process_payment_intent
                    ?.payment_intent
                );
                if (DEBUG) {
                  console.log(doc.id, &quot; =&gt; &quot;, doc.data());
                  console.log(&quot;paymentIntent&quot;, paymentIntent);
                }
                let didCapturePayment: any = null;
                if (paymentIntent?.status === &quot;requires_capture&quot;) {
                  didCapturePayment = await stripe.paymentIntents
                    .capture(
                      event?.data?.object?.action?.process_payment_intent
                        ?.payment_intent
                    )
                    .catch((error: any) =&gt; throwError(error));
                }
                if (DEBUG) console.log(&quot;didCapturePayment&quot;, didCapturePayment);
                // await admin
                //   .firestore()
                //   .collection(&#x27;client_invoices&#x27;)
                //   .doc(doc.id)
                //   .set(
                //     {
                //       paymentStatus: !didCapturePayment
                //         ? event?.data?.object?.action?.status
                //         : didCapturePayment?.status,
                //       paymentIntentObject: !didCapturePayment
                //         ? paymentIntent
                //         : didCapturePayment,
                //       updatedOn: new Date(),
                //     },
                //     {merge: true}
                //   );
                // .then(
                //   async () =&gt;
                //     await request
                //       .post(&#x27;/invoicepayment/&#x27;, {
                //         invoice: doc.data()?.url,
                //         payment_type: 0,
                //         paid: paymentIntent?.amount / 100,
                //         status: 3,
                //         info: !didCapturePayment
                //           ? `${paymentIntent?.charges?.data[0]?.card_present?.brand.toUpperCase()} - ${
                //               paymentIntent?.charges?.data[0]?.card_present
                //                 ?.last4
                //             }`
                //           : `${didCapturePayment?.charges?.data[0]?.card_present?.brand.toUpperCase()} - ${
                //               didCapturePayment?.charges?.data[0]
                //                 ?.card_present?.last4
                //             }`,
                //         created_user:
                //           proVetApiUrl +
                //           `/user/${
                //             7
                //             // environment?.type === &#x27;production&#x27; ? &#x27;7&#x27; : &#x27;63&#x27;
                //           }/`,
                //       })
                //       .then((response: any) =&gt; {
                //         const {data} = response;
                //         if (DEBUG)
                //           console.log(
                //             &#x27;API Response: POST /invoicepayment/ =&gt; &#x27;,
                //             data
                //           );
                //       })
                //       .catch(
                //         async (error: any) =&gt;
                //           (throwError(error)) &amp;&amp;
                //           console.error(
                //             &#x27;error.response.data&#x27;,
                //             error.response.data
                //           )
                //       )
                // )
                //  .catch((error: any) =&gt; throwError(error));
              });
            else
              throwError({
                message: `FAILED TO COMPLETE TRANSACTION =&gt; ${event?.data?.object?.action?.process_payment_intent?.payment_intent}`,
              });
          })
          .catch((error: any) =&gt; throwError(error));
    })
    .catch((error: any) =&gt; throwError(error));
};
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:0,&quot;character&quot;:9,&quot;text&quot;:&quot;admin&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:2,&quot;character&quot;:46,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:3,&quot;character&quot;:68,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:4,&quot;character&quot;:2,&quot;text&quot;:&quot;admin&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:5,&quot;character&quot;:5,&quot;text&quot;:&quot;firestore&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:6,&quot;character&quot;:5,&quot;text&quot;:&quot;collection&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:7,&quot;character&quot;:5,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:8,&quot;character&quot;:5,&quot;text&quot;:&quot;collection&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:9,&quot;character&quot;:5,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:9,&quot;character&quot;:12,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:9,&quot;character&quot;:19,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:9,&quot;character&quot;:25,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:9,&quot;character&quot;:33,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:10,&quot;character&quot;:5,&quot;text&quot;:&quot;set&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:12,&quot;character&quot;:11,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:12,&quot;character&quot;:18,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:12,&quot;character&quot;:24,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:18,&quot;character&quot;:5,&quot;text&quot;:&quot;catch&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:18,&quot;character&quot;:12,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:18,&quot;character&quot;:38,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:19,&quot;character&quot;:2,&quot;text&quot;:&quot;admin&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:20,&quot;character&quot;:5,&quot;text&quot;:&quot;firestore&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:21,&quot;character&quot;:5,&quot;text&quot;:&quot;collection&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:22,&quot;character&quot;:5,&quot;text&quot;:&quot;where&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:25,&quot;character&quot;:6,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:25,&quot;character&quot;:13,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:25,&quot;character&quot;:19,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:25,&quot;character&quot;:27,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:25,&quot;character&quot;:35,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:25,&quot;character&quot;:59,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:27,&quot;character&quot;:5,&quot;text&quot;:&quot;limit&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:28,&quot;character&quot;:5,&quot;text&quot;:&quot;get&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:29,&quot;character&quot;:5,&quot;text&quot;:&quot;then&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:29,&quot;character&quot;:11,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:31,&quot;character&quot;:51,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:31,&quot;character&quot;:66,&quot;text&quot;:&quot;docs&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:31,&quot;character&quot;:72,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:32,&quot;character&quot;:10,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:32,&quot;character&quot;:25,&quot;text&quot;:&quot;docs&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:32,&quot;character&quot;:31,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:33,&quot;character&quot;:8,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:33,&quot;character&quot;:22,&quot;text&quot;:&quot;forEach&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:33,&quot;character&quot;:37,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:34,&quot;character&quot;:16,&quot;text&quot;:&quot;paymentIntent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:35,&quot;character&quot;:12,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:35,&quot;character&quot;:19,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:35,&quot;character&quot;:25,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:35,&quot;character&quot;:33,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:35,&quot;character&quot;:41,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:35,&quot;character&quot;:65,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:24,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:28,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:40,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:38,&quot;character&quot;:44,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:39,&quot;character&quot;:41,&quot;text&quot;:&quot;paymentIntent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:41,&quot;character&quot;:14,&quot;text&quot;:&quot;didCapturePayment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:42,&quot;character&quot;:14,&quot;text&quot;:&quot;paymentIntent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:42,&quot;character&quot;:29,&quot;text&quot;:&quot;status&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:43,&quot;character&quot;:12,&quot;text&quot;:&quot;didCapturePayment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:45,&quot;character&quot;:16,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:45,&quot;character&quot;:23,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:45,&quot;character&quot;:29,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:45,&quot;character&quot;:37,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:45,&quot;character&quot;:45,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:46,&quot;character&quot;:20,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:22,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:48,&quot;character&quot;:48,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:50,&quot;character&quot;:54,&quot;text&quot;:&quot;didCapturePayment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:107,&quot;character&quot;:8,&quot;text&quot;:&quot;admin&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:108,&quot;character&quot;:11,&quot;text&quot;:&quot;firestore&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:109,&quot;character&quot;:11,&quot;text&quot;:&quot;collection&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:110,&quot;character&quot;:11,&quot;text&quot;:&quot;where&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:113,&quot;character&quot;:12,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:113,&quot;character&quot;:19,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:113,&quot;character&quot;:25,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:113,&quot;character&quot;:33,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:113,&quot;character&quot;:41,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:113,&quot;character&quot;:65,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:115,&quot;character&quot;:11,&quot;text&quot;:&quot;limit&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:116,&quot;character&quot;:11,&quot;text&quot;:&quot;get&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:117,&quot;character&quot;:11,&quot;text&quot;:&quot;then&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:117,&quot;character&quot;:17,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:121,&quot;character&quot;:16,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:121,&quot;character&quot;:31,&quot;text&quot;:&quot;docs&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:121,&quot;character&quot;:37,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:123,&quot;character&quot;:16,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:123,&quot;character&quot;:31,&quot;text&quot;:&quot;docs&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:123,&quot;character&quot;:37,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:124,&quot;character&quot;:14,&quot;text&quot;:&quot;querySnapshot&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:124,&quot;character&quot;:28,&quot;text&quot;:&quot;forEach&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:124,&quot;character&quot;:43,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:125,&quot;character&quot;:22,&quot;text&quot;:&quot;paymentIntent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:126,&quot;character&quot;:18,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:126,&quot;character&quot;:25,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:126,&quot;character&quot;:31,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:126,&quot;character&quot;:39,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:126,&quot;character&quot;:47,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:127,&quot;character&quot;:22,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:130,&quot;character&quot;:30,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:130,&quot;character&quot;:34,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:130,&quot;character&quot;:46,&quot;text&quot;:&quot;doc&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:130,&quot;character&quot;:50,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:131,&quot;character&quot;:47,&quot;text&quot;:&quot;paymentIntent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:133,&quot;character&quot;:20,&quot;text&quot;:&quot;didCapturePayment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:134,&quot;character&quot;:20,&quot;text&quot;:&quot;paymentIntent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:134,&quot;character&quot;:35,&quot;text&quot;:&quot;status&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:135,&quot;character&quot;:18,&quot;text&quot;:&quot;didCapturePayment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:137,&quot;character&quot;:22,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:137,&quot;character&quot;:29,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:137,&quot;character&quot;:35,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:137,&quot;character&quot;:43,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:137,&quot;character&quot;:51,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:138,&quot;character&quot;:26,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:140,&quot;character&quot;:28,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:140,&quot;character&quot;:54,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:142,&quot;character&quot;:60,&quot;text&quot;:&quot;didCapturePayment&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:204,&quot;character&quot;:62,&quot;text&quot;:&quot;event&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:204,&quot;character&quot;:69,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:204,&quot;character&quot;:75,&quot;text&quot;:&quot;object&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:204,&quot;character&quot;:83,&quot;text&quot;:&quot;action&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:204,&quot;character&quot;:91,&quot;text&quot;:&quot;process_payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:204,&quot;character&quot;:115,&quot;text&quot;:&quot;payment_intent&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:11,&quot;text&quot;:&quot;catch&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:18,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:44,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:209,&quot;character&quot;:5,&quot;text&quot;:&quot;catch&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:209,&quot;character&quot;:12,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;apps/api.movetcare.com/src/integrations/stripe/pos/terminalReaderActionSucceeded.ts&quot;,&quot;line&quot;:209,&quot;character&quot;:38,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Thu, 02 Mar 2023 15:37:59 GMT</p>
    </body>
  </html>
  